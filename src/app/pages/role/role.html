<!-- <app-notification [message]="errorMessage" type="error"></app-notification> -->
<!--<app-notification [message]="successMessage" type="success"></app-notification> -->



<section class="find-section">
    <div class="search-container">
        <input
            type="text" 
            (input)="searchTerm1 = $event.target.value"
            class="input-search-role1" 
            placeholder="Enter an ID or a role name"
        />
        <input
            type="text" 
            (input)="searchTerm2 = $event.target.value"
            class="input-search-role2" 
            placeholder="Or the company's CNPJ" 
        />
        <button 
        class="search-btn" 
        (click)="searchRoles()">Search</button>
    </div>
    <button 
        class="add-role-btn"
        (click)="openModal()">Add</button>
    <button 
        class="attach-role-btn"
        (click)="openAttachModal()">Attach Role to Employee</button>

    <app-add-company-modal
        *ngIf="showModal"
        title="Add Role"
        secondLabel="Company Name"
        secondPlaceholder="Ex.: Google Corp"
        secondKey="companyName"
        (closeModal)="showModal = false"
        (saveItem)="addRole($event.name, $event['companyName'])">
    </app-add-company-modal>

    <app-attach-role-employee-modal
        *ngIf="isAttachModalOpen"
        (closeModal)="closeAttachModal()"
        (saveItem)="onAttachSave($event)"
    ></app-attach-role-employee-modal>


</section>

<section class="roles-section">
  <div class="role-list">
    <label>
        Companies
    </label>
    <div class="company-item" *ngFor="let group of groupedRoles">
        <div class="company-header" (click)="group.expanded = !group.expanded"> {{ group.companyName }}
            <span class="toggle-icon" [class.open]="group.expanded">â–¶</span>
        </div>

        <div class="role-sublist" [class.expanded]="group.expanded">
            <div class="role-item" *ngFor="let role of group.roles"> {{ role.name }} </div>
        </div>
  </div>
</div>
</section>

<div class="pagination-controls" *ngIf="totalItems > pageSize">
  
  <button 
    (click)="previousPage()" 
    [disabled]="currentPage === 1"
    class="pagination-btn">
    &laquo; Previous
  </button>

  <ng-container *ngFor="let pageNum of [].constructor(totalPages); let i = index">
    <button
      (click)="goToPage(i + 1)"
      [class.active-page]="currentPage === i + 1"
      class="page-number-btn">
      {{ i + 1 }}
    </button>
  </ng-container>

  <span class="page-status">
    Page {{ currentPage }}/{{ totalPages }}
  </span>

  <button 
    (click)="nextPage()" 
    [disabled]="currentPage === totalPages || totalPages === 0"
    class="pagination-btn">
    Next &raquo;
  </button>
</div>
